    put:
      tags:
        - AllergyIntolerance Write
      description: |
        # Update Operations

      operationId: millenniumR4AllergyIntoleranceUpdate
      consumes:
      - application/fhir+json
      produces:
      - application/fhir+json
      parameters:
        - name: id
          in: path
          description: |
            The logical resource ID associated with the resource.
          required: true
          type: string
        - name: updateBody
          in: body
          required: true
          schema:
            $ref: "#/definitions/UpdateBody"
        - name: If-Match
          in: header
          required: true
          type: string
      responses: 
        '200':
          description: |
            **OK**
          headers:
            X-Request-Id:
              type: string
              description: Oracle troubleshooting identifier.
            opc-request-id:
              type: string
              description: Oracle troubleshooting identifier.
            ETag:
              type: string
              description: The identifier for a specific version of a resource. This will be formatted as `W/"<etag_value>"` and is used to specify the `If-Match` header value on subsequent updates.
        default:
          $ref: '#/responses/OperationOutcome'

definitions:
  UpdateBody:
    type: object
    required:
    - resourceType
    - code
    - patient
    - reaction.manifestation
    properties:
      resourceType:
        description: |
          The type of the FHIR resource.
        type: string
        enum:
        - AllergyIntolerance
      contained:
        description: |
          Contained, inline Resources.
          
          _Notes_
          These should be either <code>PractitionerRole</code> or <a target="_blank" href="https://hl7.org/fhir/R4/relatedperson.html"><code>RelatedPerson</code></a> resources that are relative references from the <a href="#update-asserter">asserter</a> field.
          
          
          _Examples_
          
          ````json
          Contained RelatedPerson
          {
            "contained": [
              {
                "resourceType":"RelatedPerson",
                "id":"638996",
                "relationship":[
                  {
                    "coding":[
                      {
                        "system": "http://terminology.hl7.org/CodeSystem/v3-RoleCode",
                        "code": "PRN",
                      }
                    ]
                  }
                ],
                "patient":{
                  "reference":"Patient/12742400"
                }
              }
            ]
          }
          
          ````
          
          ````json
          Contained PractitionerRole
          {
            "contained": [
              {
                "resourceType":"PractitionerRole",
                "id":"638994",
                "code":[
                  {
                    "coding":[
                      {
                        "system":"http://terminology.hl7.org/CodeSystem/practitioner-role",
                        "code":"doctor"
                      }
                    ]
                  }
                ]
              }
            ]
          }
          
          ````
        type: []
      clinicalStatus:
        description: |
          The clinical status of the AllergyIntolerance.
          _Examples_
          
          ````json
          {
            "clinicalStatus": {
              "coding": [
                {
                  "system": "http://terminology.hl7.org/CodeSystem/allergyintolerance-clinical",
                  "code": "resolved"
                }
              ]
            }
          }
          
          ````
        type: object
        properties:
          text:
            type: string
          coding:
            type: array
            items:
              type: object
              properties:
                system:
                  type: string
                code:
                  type: string
      verificationStatus:
        description: |
          The verification status to support or decline the clinical status of allergy.
          
          _Notes_
          verificationStatus code of <code>refuted</code> is not supported during AllergyIntolerance updates.
          
          _Examples_
          
          ````json
          {
            "verificationStatus": {
              "coding": [
                {
                  "system": "http://terminology.hl7.org/CodeSystem/allergyintolerance-verification",
                  "code": "confirmed"
                }
              ]
            }
          }
          
          ````
        type: object
        properties:
          text:
            type: string
          coding:
            type: array
            items:
              type: object
              properties:
                system:
                  type: string
                code:
                  type: string
      type:
        description: |
          allergy | intolerance - Underlying mechanism (if known)
          _Examples_
          
          ````json
          {
            "type": "allergy"
          }
          
          ````
        type: string
      category:
        description: |
          Category of the identified <a href="#update-code">code</a>.
          
          _Notes_
          <ul>
            <li> Category code of <code>biologic</code> is not supported</li>
            <li> Only a single category will be written to the allergy </li>
            <li> When multiple categories are provided, the category to be picked is based on precedence. medication > food > environment. </li>
          </ul>
          
          
          _Examples_
          
          ````json
          {
            "category":[
              "environment",
              "food",
              "medication"
            ]
          }
          
          ````
        type: array
        items:
          type: string
      criticality:
        description: |
          low | high | unable-to-assess
          _Examples_
          
          ````json
          {
            "criticality": "high"
          }
          
          ````
        type: array
        items:
          type: string
      code:
        description: |
          Code that identifies the allergy or intolerance
          
          _Notes_
          A code must always be provided while creating an allergy.
          
          _Examples_
          
          ````json
          {
            "code":{
              "coding": [
                {
                  "system": "http://snomed.info/sct",
                  "code": "9220005"
                }
              ],
              "text": "Plant phenol oil"
            }
          }
          
          ````
        type: object
        properties:
          text:
            type: string
          coding:
            type: array
            items:
              type: object
              properties:
                system:
                  type: string
                code:
                  type: string
      patient:
        description: |
          Indicates the patient who the sensitivity is for.
          _Examples_
          
          ````json
          {
            "patient": {
              "reference": "Patient/631923"
            }
          }
          
          ````
        type: object
        properties:
          reference:
            type: string
      encounter:
        description: |
          Indicates the encounter when the allergy or intolerance was asserted.
          _Examples_
          
          ````json
          {
            "encounter": {
              "reference":"Encounter/1693915"
            }
          }
          
          ````
        type: object
        properties:
          reference:
            type: string
      onset[x]:
        description: |
          Estimated or actual date or date-time the allergy began, in the opinion of the clinician.
          
          _Notes_
          <ul>
            <li> Only a type of dateTime is supported.</li>
            <li> The dateTime is converted to a GMT date. </li>
          </ul>
          
          
          _Examples_
          
          ````json
          {
            "onsetDateTime": "2015-10-14T13:13:20-06:00"
          }
          
          ````
      asserter:
        description: |
          Indicates the source of information about the allergy.
          
          _Notes_
          Asserter must be provided and linked to the contained resource, if a contained resource is specified.
          
          _Examples_
          
          ````json
          {
            "asserter":{
              "reference":"#638994"
            }
          }
          
          ````
        type: object
        properties:
          reference:
            type: string
      note:
        description: |
          Additional narrative about the allergy not captured in other fields.
          
          _Notes_
          Updates do not allow an author to be specified. One will be infered from the authorization token. If an id is not provided with the note it will be assumed to be a new note and will be written as such. If an id is provided, then it will be assumed to be an existing note and will not be updated or re-created.
          
          _Examples_
          
          ````json
          {
            "note": [
              {
                "text": "Updated with additional details provided by patient."
              }
            ]
          }
          
          ````
        type: array
        items:
          type: object
          properties:
            authorReference:
              type: object
              properties:
                reference:
                  type: string
            time:
              type: string
            text:
              type: string
      reaction:
        description: |
          Adverse Reaction Events linked to exposure to substance
          _Examples_
          
          ````json
          {
            "reaction":[
              {
                "manifestation":[
                  {
                    "coding":[
                      {
                        "system":"http://snomed.info/sct",
                        "code":"414322003"
                      }
                    ],
                    "text":"Blastobacter"
                  }
                ],
                "severity":"severe"
              }
            ]
          }
          
          ````
        type: array
        items:
          type: object
          properties:
            :
              type: 
            type: object
            properties:
      reaction.manifestation:
        description: |
          Clinical symptoms/signs associated with the Event
          
          _Notes_
          Only one manifestation can be provided.
          
          _Examples_
          
          ````json
          {
            {
              "manifestation":[
                {
                  "coding":[
                    {
                      "system":"http://snomed.info/sct",
                      "code":"414322003"
                    }
                  ],
                  "text":"Blastobacter"
                }
              ]
            }
          }
          
          ````
        type: array
        items:
          type: object
          properties:
            text:
              type: string
            coding:
              type: array
              items:
                type: object
                properties:
                  system:
                    type: string
                  code:
                    type: string
      reaction.severity:
        description: |
          mild | moderate | severe (of event as a whole).
          _Examples_
          
          ````json
          {
            "severity":"severe"
          }
          
          ````
        type: string